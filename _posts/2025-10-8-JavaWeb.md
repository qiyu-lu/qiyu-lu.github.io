---
title: "JavaWebå­¦ä¹ "
date: 2025-10-08 
categories: [JAVAå­¦ä¹ ]
tags: [JAVA]
---
---
# 1. JavaWeb åŸºç¡€

å‰ç«¯éƒ¨åˆ†æš‚æ—¶è·³è¿‡

## 1.1 webåŸºç¡€çŸ¥è¯†

### 1.1.1 SpringBoot é¡¹ç›®çš„ç»“æ„

```bash
springboot-demo/
â”‚
â”œâ”€â”€ src/
â”‚   â”œâ”€â”€ main/
â”‚   â”‚   â”œâ”€â”€ java/
â”‚   â”‚   â”‚   â””â”€â”€ com/example/demo/
â”‚   â”‚   â”‚       â”œâ”€â”€ DemoApplication.java        â† ç¨‹åºå…¥å£ï¼ˆå¯åŠ¨ç±»ï¼‰
â”‚   â”‚   â”‚       â”œâ”€â”€ controller/                 â† æ§åˆ¶å±‚ï¼ˆæ¥æ”¶è¯·æ±‚ï¼‰
â”‚   â”‚   â”‚       â”œâ”€â”€ service/                    â† ä¸šåŠ¡é€»è¾‘å±‚
â”‚   â”‚   â”‚       â”œâ”€â”€ mapper/                     â† æ•°æ®è®¿é—®å±‚ï¼ˆMyBatisæ¥å£ï¼‰
â”‚   â”‚   â”‚       â””â”€â”€ entity/                     â† å®ä½“ç±»ï¼ˆä¸æ•°æ®åº“è¡¨å¯¹åº”ï¼‰
â”‚   â”‚   â”œâ”€â”€ resources/
â”‚   â”‚   â”‚   â”œâ”€â”€ application.properties          â† æ ¸å¿ƒé…ç½®æ–‡ä»¶
â”‚   â”‚   â”‚   â”œâ”€â”€ static/                         â† é™æ€èµ„æºï¼ˆjsã€cssã€å›¾ç‰‡ï¼‰
â”‚   â”‚   â”‚   â”œâ”€â”€ templates/                      â† é¡µé¢æ¨¡æ¿ï¼ˆå¦‚ Thymeleafï¼‰
â”‚   â”‚   â”‚   â””â”€â”€ mapper/                         â† MyBatis çš„ XML æ˜ å°„æ–‡ä»¶
â”‚   â”‚   â””â”€â”€ ...
â”‚   â””â”€â”€ test/
â”‚       â””â”€â”€ java/
â”‚           â””â”€â”€ com/example/demo/
â”‚               â””â”€â”€ DemoApplicationTests.java    â†  å•å…ƒæµ‹è¯•ç±»
â”‚
â”œâ”€â”€ pom.xml                                     â† Maven é…ç½®æ–‡ä»¶ï¼ˆä¾èµ–ç®¡ç†ï¼‰
â””â”€â”€ README.md                                   â† é¡¹ç›®è¯´æ˜ï¼ˆå¯é€‰ï¼‰
```

è‡ªåŠ¨ç”Ÿæˆçš„ **Application** æ˜¯æ•´ä¸ª Spring Boot é¡¹ç›®çš„ å¯åŠ¨å…¥å£ç±»ï¼Œä½œç”¨ä¸ºï¼š
- é¡¹ç›®å¯åŠ¨æ—¶ä»è¿™é‡Œæ‰§è¡Œï¼›
- å¯åŠ¨å†…ç½®çš„ Tomcatï¼›
- åŠ è½½æ‰€æœ‰ Spring é…ç½®ï¼›
- æ‰«æç»„ä»¶ï¼ˆControllerã€Serviceã€Repository ç­‰ï¼‰ï¼›
- è¿è¡Œä½ çš„ Web åº”ç”¨æˆ–åå°æœåŠ¡ã€‚

## 1.2 ç›¸å…³æ³¨è§£è§£é‡Š

---


| æ³¨è§£                | æ‰€å±å±‚ | ä¸»è¦åŠŸèƒ½                  | æ³¨å…¥æ–¹å¼            |
| ----------------- | --- | --------------------- | --------------- |
| `@RestController` | æ§åˆ¶å±‚ | å®šä¹‰ REST æ¥å£ï¼Œè¿”å› JSON æ•°æ® | â€”â€”              |
| `@RequestMapping` | æ§åˆ¶å±‚ | æ˜ å°„è¯·æ±‚è·¯å¾„                | â€”â€”              |
| `@Resource`       | é€šç”¨  | æŒ‰åç§°æ³¨å…¥ Beanï¼ˆJDK æ ‡å‡†ï¼‰    | byName â†’ byType |
| `@Repository`     | æ•°æ®å±‚ | æ ‡è¯† DAO å±‚ç»„ä»¶ï¼Œå¼‚å¸¸è½¬æ¢       | â€”â€”              |
| `@Service`        | ä¸šåŠ¡å±‚ | æ ‡è¯†ä¸šåŠ¡é€»è¾‘ç»„ä»¶              | â€”â€”              |
| `@Autowired`      | é€šç”¨  | æŒ‰ç±»å‹æ³¨å…¥ Beanï¼ˆSpring ç‰¹æœ‰ï¼‰ | byType          |
| `@Component`      |é€šç”¨   | æ ‡æ³¨ä¸å±äº Controller / Service / Repository å±‚çš„é€šç”¨ç±» | â€”â€” |


---

- `@RestController`  æ˜¯ **æ§åˆ¶å±‚ï¼ˆControllerï¼‰** çš„æ³¨è§£ï¼Œç”¨äºå®šä¹‰ä¸€ä¸ª RESTful é£æ ¼çš„æ§åˆ¶å™¨ã€‚

    ç­‰ä»·äºï¼š

    ```java
    @Controller + @ResponseBody
    ```

    åŠŸèƒ½ï¼š

    * è¡¨ç¤ºè¯¥ç±»è´Ÿè´£å¤„ç† HTTP è¯·æ±‚ï¼›
    * è¿”å›çš„æ•°æ®**ä¸æ˜¯é¡µé¢**ï¼Œè€Œæ˜¯ **JSON / XML ç­‰æ•°æ®æ ¼å¼**ï¼›
    * é€šå¸¸ç”¨äºå¼€å‘å‰åç«¯åˆ†ç¦»çš„æ¥å£ã€‚

- `@RequestMapping` ç”¨äº **æ˜ å°„è¯·æ±‚è·¯å¾„** åˆ°æ§åˆ¶å™¨æ–¹æ³•æˆ–ç±»ä¸Šã€‚

    å¸¸ç”¨ä½ç½®ï¼š

    * **ç±»ä¸Š**ï¼šå®šä¹‰å…¬å…±è·¯å¾„å‰ç¼€ï¼›
    * **æ–¹æ³•ä¸Š**ï¼šå®šä¹‰å…·ä½“çš„è¯·æ±‚è·¯å¾„ã€‚

    Spring æä¾›äº†æ›´ç»†ç²’åº¦çš„æ³¨è§£ï¼š

    | æ³¨è§£               | è¯´æ˜           |
    | ---------------- | ------------ |
    | `@GetMapping`    | å¤„ç† GET è¯·æ±‚    |
    | `@PostMapping`   | å¤„ç† POST è¯·æ±‚   |
    | `@PutMapping`    | å¤„ç† PUT è¯·æ±‚    |
    | `@DeleteMapping` | å¤„ç† DELETE è¯·æ±‚ |

- `@Resource` æ˜¯ **JDK æä¾›çš„ä¾èµ–æ³¨å…¥æ³¨è§£**ï¼ˆå±äº `javax.annotation` åŒ…ï¼‰ã€‚ç”¨äº **è‡ªåŠ¨æ³¨å…¥ Bean å¯¹è±¡**ï¼ˆç±»ä¼¼äº `@Autowired`ï¼‰ã€‚

    ç‰¹ç‚¹ï¼š

    * é»˜è®¤æŒ‰ **åç§°ï¼ˆbyNameï¼‰** æ³¨å…¥ï¼›
    * å¦‚æœæ‰¾ä¸åˆ°åŒå Beanï¼Œåˆ™æŒ‰ç±»å‹ï¼ˆbyTypeï¼‰åŒ¹é…ï¼›
    * å¯ä»¥é€šè¿‡ `name` å±æ€§æ˜¾å¼æŒ‡å®š Bean åç§°ã€‚


- `@Repository` ç”¨äºæ ‡æ³¨ **æŒä¹…å±‚ï¼ˆDAO / Mapperï¼‰** ç»„ä»¶ã€‚

    åŠŸèƒ½ï¼š

    * è¡¨ç¤ºè¯¥ç±»æ˜¯ä¸æ•°æ®åº“äº¤äº’çš„ç»„ä»¶ï¼›
    * ä½¿å¼‚å¸¸è½¬æ¢æœºåˆ¶ç”Ÿæ•ˆï¼ˆSpring ä¼šå°†æ•°æ®åº“å¼‚å¸¸è½¬æ¢ä¸ºç»Ÿä¸€çš„ Spring DataAccessExceptionï¼‰ã€‚

    > åœ¨ MyBatis ä¸­ï¼Œä¸€èˆ¬æ¥å£ä¸Šä¸ç”¨æ‰‹åŠ¨åŠ  `@Repository`ï¼Œå› ä¸º Mapper ä¼šè¢«è‡ªåŠ¨æ‰«ææ³¨å†Œä¸º Beanã€‚

- `@Service` ç”¨äºæ ‡æ³¨ **ä¸šåŠ¡é€»è¾‘å±‚ï¼ˆService å±‚ï¼‰** çš„ç»„ä»¶ã€‚

    åŠŸèƒ½ï¼š

    * æ ‡è¯†ä¸šåŠ¡é€»è¾‘ç±»ï¼›
    * è®© Spring è‡ªåŠ¨å°†å…¶æ³¨å†Œä¸º Beanï¼›
    * ä¾¿äºä¸ Controllerã€Repository å±‚åŒºåˆ†ã€‚

- `@Autowired`ï¼šSpring çš„ä¾èµ–æ³¨å…¥ï¼ˆDIï¼‰æ³¨è§£ï¼Œç”¨äºè‡ªåŠ¨è£…é… Beanã€‚

    ç‰¹ç‚¹ï¼š

    * æŒ‰ **ç±»å‹ï¼ˆbyTypeï¼‰** è‡ªåŠ¨æ³¨å…¥ï¼›
    * å¦‚æœæœ‰å¤šä¸ªåŒç±»å‹ Beanï¼Œå¯ä»¥ç”¨ `@Qualifier` æŒ‡å®šï¼›
    * ä¹Ÿå¯ä»¥å’Œæ„é€ æ–¹æ³•ã€Setterã€å­—æ®µä¸€èµ·ä½¿ç”¨ã€‚

- `@Component` æ˜¯ Spring ä¸­æœ€åŸºç¡€çš„ ç»„ä»¶æ³¨è§£ï¼Œè¡¨ç¤ºä¸€ä¸ªç±»è¢« Spring ç®¡ç†ï¼Œæˆä¸º IOC å®¹å™¨ä¸­çš„ Beanã€‚

    åªè¦ç±»ä¸ŠåŠ äº† @Componentï¼ŒSpring å¯åŠ¨æ—¶å°±ä¼šè‡ªåŠ¨åˆ›å»ºè¿™ä¸ªç±»çš„å¯¹è±¡ï¼Œå¹¶æ”¾è¿›å®¹å™¨ä¸­ç®¡ç†ï¼ˆå®ç°ä¾èµ–æ³¨å…¥ï¼‰ã€‚

    ä½¿ç”¨åœºæ™¯ï¼š

    ä¸€èˆ¬ç”¨äºæ ‡æ³¨ä¸å±äº Controller / Service / Repository å±‚çš„é€šç”¨ç±»ï¼›
---


### 1.2.1 ä»£ç æ¡ˆä¾‹

- é€šè¿‡å‰ç«¯é¡µé¢æ¥è¯·æ±‚æœ¬åœ°çš„æ–‡ä»¶ä¸­çš„æ•°æ®ï¼Œç„¶åå°†æ•°æ®æ˜¾ç¤ºåœ¨å‰ç«¯ä¸­

```java
@RestController
public class UserController {
    //æ”¾åœ¨ static/user.html ä¸‹çš„ HTML æ–‡ä»¶ï¼Œå°±ç›¸å½“äºç½‘ç«™çš„ä¸€ä¸ªé¡µé¢ã€‚
    //æ‰€ä»¥ä½¿ç”¨ http://localhost:8080/list ä¼šè¿”å›åŸå§‹æ•°æ®ï¼Œåç«¯æ¥å£ï¼Œåªè¿”å›æ•°æ®ï¼ˆJSON æ ¼å¼ï¼‰ã€‚
    // ä½¿ç”¨http://localhost:8080/user.htmlæ˜¾ç¤ºå‰ç«¯é¡µé¢ï¼Œå‰ç«¯é¡µé¢ï¼Œå±•ç¤º UIï¼Œå¹¶é€šè¿‡ JS è¯·æ±‚åç«¯æ•°æ®ã€‚
    @RequestMapping("/list")
    public List<Day250928_User> list(){
        // 1. è¯»å–èµ„æºæ–‡ä»¶ï¼ˆuser.txtï¼‰ï¼Œæ–‡ä»¶æ”¾åœ¨ resources/static ç›®å½•ä¸‹
        //ä» classpathï¼ˆå³ src/main/resources ä¸‹çš„èµ„æºç›®å½•ï¼‰æŸ¥æ‰¾èµ„æºæ–‡ä»¶ "static/user.txt"ã€‚
        InputStream in = this.getClass().getClassLoader().getResourceAsStream("static/user.txt");
        // 2. ç”¨ Hutool å·¥å…·ç±»æŠŠæ–‡ä»¶å†…å®¹è¯»æˆä¸€è¡Œä¸€è¡Œçš„å­—ç¬¦ä¸²,ç„¶åæŠŠæ¯ä¸€è¡Œä½œä¸ºä¸€ä¸ª String æ”¾åˆ°è¿™ä¸ª ArrayList é‡Œã€‚
        ArrayList<String> lines = IoUtil.readLines(in, StandardCharsets.UTF_8, new ArrayList<>());
        // 3. æŠŠæ¯ä¸€è¡Œå­—ç¬¦ä¸²è§£ææˆ User å¯¹è±¡
        List<Day250928_User> userList = lines.stream().map(line -> {
            //stream() æŠŠåˆ—è¡¨è½¬æ¢æˆ æµï¼Œæ–¹ä¾¿ç”¨å‡½æ•°å¼æ“ä½œï¼ˆmapã€filterã€collect ç­‰ï¼‰ã€‚
            //map ä¼šå¯¹æµä¸­çš„æ¯ä¸€ä¸ªå…ƒç´ æ‰§è¡Œ è½¬æ¢æ“ä½œï¼Œè¿™é‡Œæ¯ä¸ªå…ƒç´ å°±æ˜¯ lineï¼ˆä¸€è¡Œæ–‡æœ¬ï¼‰ã€‚
            String[] parts = line.split(",");
            Integer id = Integer.parseInt(parts[0]);
            String username = parts[1];
            String password = parts[2];
            String name = parts[3];
            String sex = parts[4];
            Integer age = Integer.parseInt(parts[5]);
            LocalDateTime updateTime = LocalDateTime.parse(parts[6],
                    DateTimeFormatter.ofPattern("yyyy-MM-dd HH:mm:ss"));
            return new Day250928_User(id, username, password, name, sex, age, updateTime);
        }).collect(Collectors.toList());//collect(Collectors.toList()) æŠŠå¤„ç†åçš„å¯¹è±¡æµ æ”¶é›†æˆä¸€ä¸ª Listã€‚

        //ä¸Šé¢è¿™æ˜¯lambdaè¡¨è¾¾å¼ï¼Œä¸‹é¢è¿™æ˜¯å®Œæ•´å†™æ³•ï¼Œæ˜¯é‡å†™äº†Functionæ¥å£
        InputStream in2 = this.getClass().getClassLoader().getResourceAsStream("static/user.txt");
        ArrayList<String> lines2 = IoUtil.readLines(in2, StandardCharsets.UTF_8, new ArrayList<>());
        List<Day250928_User> userList2 = lines2.stream().map(new Function<String, Day250928_User>() {
            @Override
            public Day250928_User apply(String line) {
                String[] parts = line.split(",");
                Integer id = Integer.parseInt(parts[0]);
                String username = parts[1];
                String password = parts[2];
                String name = parts[3];
                String sex = parts[4];
                Integer age = Integer.parseInt(parts[5]);
                LocalDateTime updateTime = LocalDateTime.parse(parts[6],
                        DateTimeFormatter.ofPattern("yyyy-MM-dd HH:mm:ss"));
                return new Day250928_User(id, username, password, name, sex, age, updateTime);
            }
        }).collect(Collectors.toList());//collect(Collectors.toList()) æŠŠå¤„ç†åçš„å¯¹è±¡æµ æ”¶é›†æˆä¸€ä¸ª Listã€‚

        return userList2;// 4. è¿”å›ç”¨æˆ·åˆ—è¡¨ -> Spring Boot è‡ªåŠ¨æŠŠå®ƒè½¬æˆ JSON
        // å› ä¸ºç±»ä¸Šæœ‰ @RestControllerï¼ŒSpring Boot ä¼šè‡ªåŠ¨æŠŠè¿™ä¸ªå¯¹è±¡åºåˆ—åŒ–ä¸º JSONï¼Œå†å†™åˆ° HTTP å“åº”é‡Œã€‚
    }
}

```

ä¸Šè¿°ä»£ç å°†æ‰€æœ‰çš„å¤„ç†é€»è¾‘éƒ½æ”¾åœ¨äº†controlleræ–¹æ³•ä¸­ï¼Œä¸ºäº†è§£è€¦ï¼Œå®ç°ä¸‰å±‚æ¶æ„ï¼š

- Controllerï¼šæ§åˆ¶å±‚ã€‚æ¥æ”¶å‰ç«¯å‘é€çš„è¯·æ±‚ï¼Œå¯¹è¯·æ±‚è¿›è¡Œå¤„ç†ï¼Œå¹¶å“åº”æ•°æ®ã€‚
- Serviceï¼šä¸šåŠ¡é€»è¾‘å±‚ã€‚å¤„ç†å…·ä½“çš„ä¸šåŠ¡é€»è¾‘ã€‚
- Daoï¼šæ•°æ®è®¿é—®å±‚(Data Access Object)ï¼Œä¹Ÿç§°ä¸ºæŒä¹…å±‚ã€‚è´Ÿè´£æ•°æ®è®¿é—®æ“ä½œï¼ŒåŒ…æ‹¬æ•°æ®çš„å¢ã€åˆ ã€æ”¹ã€æŸ¥ã€‚

å°†ä¸Šè¿°ä»£ç è¿›è¡Œåˆ†å¼€ï¼š

- æ§åˆ¶å±‚

```java
@RestController
public class newUserController {
    //private UserServiceImpl userService =  new UserServiceImpl();
    /**
     * å¿…é¡»åˆå§‹åŒ–ï¼Œæˆ–è€…åœ¨å…¶ä»–çš„åœ°æ–¹è¿›è¡Œåˆå§‹åŒ–ï¼Œä¸ç„¶ä¼šæŠ¥é”™ï¼Œä½†æ˜¯è¿™ç§æ–¹å¼ï¼Œ
     * NewUserController ç›´æ¥ä¾èµ– UserServiceImpl çš„å…·ä½“å®ç°ã€‚
     * å¦‚æœå°†æ¥æƒ³æ¢æˆ UserServiceV2Implï¼Œä½ å¿…é¡»ä¿®æ”¹ Controller çš„ä»£ç ï¼Œæ‰èƒ½æ›¿æ¢ï¼š
     * private UserServiceImpl userService = new UserServiceV2Impl();
     * åŒç†Daoä¹Ÿæ˜¯è¿™ä¸ªé—®é¢˜ï¼Œ
     *
     * ç†æƒ³çš„ä½è€¦åˆåšæ³•
     * Controller åº”è¯¥åªä¾èµ– æ¥å£ï¼ˆUserServiceï¼‰ï¼Œè€Œä¸æ˜¯å…·ä½“å®ç°ï¼ˆUserServiceImplï¼‰ã€‚
     * å“ªä¸ªå®ç°ç±»è¦è¢«æ³¨å…¥ï¼Œç”± Spring å®¹å™¨æ¥å†³å®šã€‚
     * */

    //è§£å†³ï¼šåœ¨å¯¹åº”çš„å®ç°ç±»å‰åŠ      æ³¨è§£
//    @Autowired // è‡ªåŠ¨æ³¨å…¥ Spring å®¹å™¨ä¸­çš„ NewService å®ç°
//    private newService userService;//å¦‚æœæœ‰å¤šä¸ªç›¸åŒçš„beanæ³¨å…¥æ—¶ï¼Œè¿™ä¸ªä¼šæŠ¥é”™ï¼Œæœ‰ä»¥ä¸‹ä¸‰ç§è§£å†³æ–¹æ¡ˆ
    /**
     * ä½¿ç”¨@Primaryæ³¨è§£ å½“å­˜åœ¨å¤šä¸ªç›¸åŒç±»å‹çš„Beanæ³¨å…¥æ—¶ï¼ŒåŠ ä¸Š@Primaryæ³¨è§£ï¼Œæ¥ç¡®å®šé»˜è®¤çš„å®ç°ã€‚
     * ä½¿ç”¨@Qualifieræ³¨è§£
     * æŒ‡å®šå½“å‰è¦æ³¨å…¥çš„beanå¯¹è±¡ã€‚ åœ¨@Qualifierçš„valueå±æ€§ä¸­ï¼ŒæŒ‡å®šæ³¨å…¥çš„beançš„åç§°ï¼Œåç§°é¦–å­—æ¯å°å†™ã€‚ @Qualifieræ³¨è§£ä¸èƒ½å•ç‹¬ä½¿ç”¨ï¼Œå¿…é¡»é…åˆ@Autowiredä½¿ç”¨ã€‚
     * ä½¿ç”¨@Resourceæ³¨è§£
     * æ˜¯æŒ‰ç…§beançš„åç§°è¿›è¡Œæ³¨å…¥ã€‚é€šè¿‡nameå±æ€§æŒ‡å®šè¦æ³¨å…¥çš„beançš„åç§°ã€‚*/
//    @Qualifier("userServiceImpl2")//è¿™é‡Œä¸ºé¦–çš„å­—æ¯è¦å°å†™
//    @Autowired
//    private newService userService;

    @Resource(name = "userServiceImpl2")
    private newService userService;


    @RequestMapping("/newList")
    public List<Day250928_User> newList(){
        System.out.println("newList");
        return userService.findAll();
    }
}
```

- ä¸šåŠ¡é€»è¾‘å±‚

```java
public interface newService {
    public List<Day250928_User> findAll();
}
```

```java
@Service  // å‘Šè¯‰ Spring è¿™æ˜¯ä¸€ä¸ªä¸šåŠ¡å±‚ Beanï¼Œè¦äº¤ç»™ IOC å®¹å™¨ç®¡ç† ä¸ºäº†è§£è€¦å±‚ä¸å±‚ä¹‹é—´çš„è€¦åˆ
public class UserServiceImpl2 implements newService{
    //private UserDaoImpl userDao = new UserDaoImpl();
    @Autowired
    private newDao userDao;

    @Override
    public List<Day250928_User> findAll() {
        List<String> lines = userDao.findAll();

        List<Day250928_User> list = lines.stream().map(
                new Function<String, Day250928_User>() {
                    @Override
                    public Day250928_User apply(String s) {
                        String[] parts = s.split(",");
                        Integer id = Integer.valueOf(parts[0]);
                        String username = parts[1];
                        String password = parts[2];
                        String name = "new" + parts[3];
                        String sex =  parts[4];
                        Integer age = Integer.valueOf(parts[5]);
                        LocalDateTime updateTime = LocalDateTime.parse(parts[6],
                                DateTimeFormatter.ofPattern("yyyy-MM-dd HH:mm:ss"));
                        return new Day250928_User(id, username, password, name, sex, age, updateTime);
                    }
                }
        ).collect(Collectors.toList());

        return list;
    }
}
```

- æ•°æ®è®¿é—®å±‚

```java
public interface newDao {
    public List<String> findAll();
}
```

```java
@Repository //
public class UserDaoImpl implements newDao {
    @Override
    public List<String> findAll() {
        InputStream in = this.getClass().getClassLoader().getResourceAsStream("static/user.txt");
        List<String> lines = IoUtil.readLines(in, StandardCharsets.UTF_8, new ArrayList<>());
        return lines;
    }
}
```


å…¶ä¸­ï¼Œå¦‚æœåˆ©ç”¨ä»¥å‰çš„åªæ˜¯ï¼Œå°±åƒæ§åˆ¶å±‚ä¸­æ³¨é‡Šä¸­å†™çš„é‚£æ · `private UserServiceImpl userService =  new UserServiceImpl();` éœ€è¦ä»€ä¹ˆå¯¹è±¡ï¼Œç›´æ¥newä¸€ä¸ªå¯¹è±¡ï¼Œå¦‚æœè¯´æˆ‘ä»¬éœ€è¦æ›´æ¢å®ç°ç±»ï¼Œæ¯”å¦‚ç”±äºä¸šåŠ¡çš„å˜æ›´ï¼ŒUserServiceImpl ä¸èƒ½æ»¡è¶³ç°æœ‰çš„ä¸šåŠ¡éœ€æ±‚ï¼Œæˆ‘ä»¬éœ€è¦åˆ‡æ¢ä¸º UserServiceImpl2 è¿™å¥—å®ç°ï¼Œå°±éœ€è¦ä¿®æ”¹Contorllerçš„ä»£ç ï¼Œéœ€è¦åˆ›å»º UserServiceImpl2 çš„å®ç°new UserServiceImpl2() ã€‚è¿™æ ·ä¼šå¯¼è‡´å±‚ä¸å±‚ä¹‹é—´ç›¸äº’å…³è”ï¼Œå› æ­¤æœ‰äº† `@Resource` ï¼Œ`@Repository`ï¼Œ `@Service` ï¼Œ `@Autowired` ç­‰æ³¨è§£ï¼Œ
é€šè¿‡ä½¿ç”¨æ³¨è§£æ¥ä»£æ›¿æ‰‹åŠ¨newå¯¹è±¡ï¼Œé€šè¿‡å®¹å™¨æ¥ç®¡ç†è¦ä½¿ç”¨çš„å¯¹è±¡


## 1.2 webåç«¯åŸºç¡€(æ•°æ®åº“)

### SQL è¯­å¥

#### DDLï¼ˆData Definition Languageï¼‰è¯­å¥ â€” æ•°æ®å®šä¹‰è¯­è¨€

DDL ç”¨äºå®šä¹‰å’Œç®¡ç†æ•°æ®åº“å¯¹è±¡ï¼Œå¦‚æ•°æ®åº“ã€è¡¨ã€å­—æ®µç­‰ã€‚

---

1. æ•°æ®åº“æ“ä½œ

    | æ“ä½œ      | SQL ç¤ºä¾‹                                                            |
    | ------- | ----------------------------------------------------------------- |
    | æŸ¥è¯¢æ‰€æœ‰æ•°æ®åº“ | `SHOW DATABASES;`                                                 |
    | æŸ¥è¯¢å½“å‰æ•°æ®åº“ | `SELECT DATABASE();`                                              |
    | åˆ›å»ºæ•°æ®åº“   | `CREATE DATABASE [IF NOT EXISTS] æ•°æ®åº“å [DEFAULT CHARSET utf8mb4];` |
    | ä½¿ç”¨æ•°æ®åº“   | `USE æ•°æ®åº“å;`                                                       |
    | åˆ é™¤æ•°æ®åº“   | `DROP DATABASE [IF EXISTS] æ•°æ®åº“å;`                                 |

---

2. è¡¨æ“ä½œ

- åˆ›å»ºè¡¨

    ```sql
    CREATE TABLE è¡¨å (
        å­—æ®µ1 å­—æ®µ1ç±»å‹ [çº¦æŸ] [COMMENT 'å­—æ®µ1æ³¨é‡Š'],
        å­—æ®µ2 å­—æ®µ2ç±»å‹ [çº¦æŸ] [COMMENT 'å­—æ®µ2æ³¨é‡Š'],
        ...
        å­—æ®µn å­—æ®µnç±»å‹ [çº¦æŸ] [COMMENT 'å­—æ®µnæ³¨é‡Š']
    ) [COMMENT 'è¡¨æ³¨é‡Š'];
    ```

    - å¸¸ç”¨æ•°æ®ç±»å‹ï¼ˆç®€è¦ï¼‰

        | ç±»å‹ç±»åˆ«   | ç¤ºä¾‹                              | è¯´æ˜         |
        | ------ | ------------------------------- | ---------- |
        | æ•´æ•°ç±»å‹   | `INT`, `BIGINT`                 | å­˜å‚¨æ•´æ•°       |
        | å°æ•°ç±»å‹   | `DECIMAL(10,2)`                 | å­˜å‚¨ç²¾ç¡®å°æ•°     |
        | å­—ç¬¦ä¸²ç±»å‹  | `CHAR(10)`, `VARCHAR(50)`       | å­˜å‚¨å­—ç¬¦ä¸²      |
        | æ—¥æœŸæ—¶é—´ç±»å‹ | `DATE`, `DATETIME`, `TIMESTAMP` | å­˜å‚¨æ—¶é—´æ—¥æœŸ     |
        | å¸ƒå°”ç±»å‹   | `BOOLEAN`                       | å­˜å‚¨çœŸæˆ–å‡ï¼ˆ1/0ï¼‰ |

    - å¸¸ç”¨çº¦æŸ

        | çº¦æŸå  | æè¿°                | å…³é”®å­—              |
        | ---- | ----------------- | ---------------- |
        | éç©ºçº¦æŸ | é™åˆ¶è¯¥å­—æ®µå€¼ä¸èƒ½ä¸º NULL    | `NOT NULL`       |
        | å”¯ä¸€çº¦æŸ | ä¿è¯å­—æ®µå€¼å”¯ä¸€ã€ä¸é‡å¤       | `UNIQUE`         |
        | ä¸»é”®çº¦æŸ | è¡¨ä¸­å”¯ä¸€æ ‡è¯†æ¯ä¸€è¡Œæ•°æ®ï¼Œä¸”ä¸èƒ½ä¸ºç©º | `PRIMARY KEY`    |
        | é»˜è®¤çº¦æŸ | æœªæŒ‡å®šå€¼æ—¶ä½¿ç”¨é»˜è®¤å€¼        | `DEFAULT`        |
        | å¤–é”®çº¦æŸ | å»ºç«‹ä¸¤è¡¨ä¹‹é—´å…³ç³»ï¼Œä¿è¯æ•°æ®ä¸€è‡´æ€§  | `FOREIGN KEY`    |
        | ä¸»é”®è‡ªå¢ | è‡ªåŠ¨ç”Ÿæˆä¸»é”®å€¼           | `AUTO_INCREMENT` |

---

- è¡¨ç»“æ„ç®¡ç†

    | æ“ä½œ         | SQL ç¤ºä¾‹                                                        |
    | ---------- | ------------------------------------------------------------- |
    | æŸ¥è¯¢å½“å‰æ•°æ®åº“æ‰€æœ‰è¡¨ | `SHOW TABLES;`                                                |
    | æŸ¥çœ‹è¡¨ç»“æ„      | `DESC è¡¨å;`                                                    |
    | æŸ¥çœ‹å»ºè¡¨è¯­å¥     | `SHOW CREATE TABLE è¡¨å;`                                       |
    | æ·»åŠ å­—æ®µ       | `ALTER TABLE è¡¨å ADD å­—æ®µå ç±»å‹(é•¿åº¦) [COMMENT 'æ³¨é‡Š'] [çº¦æŸ];`          |
    | ä¿®æ”¹å­—æ®µç±»å‹     | `ALTER TABLE è¡¨å MODIFY å­—æ®µå æ–°ç±»å‹(é•¿åº¦);`                          |
    | ä¿®æ”¹å­—æ®µååŠç±»å‹   | `ALTER TABLE è¡¨å CHANGE æ—§å­—æ®µå æ–°å­—æ®µå ç±»å‹(é•¿åº¦) [COMMENT 'æ³¨é‡Š'] [çº¦æŸ];` |
    | åˆ é™¤å­—æ®µ       | `ALTER TABLE è¡¨å DROP å­—æ®µå;`                                    |
    | ä¿®æ”¹è¡¨å       | `RENAME TABLE æ—§è¡¨å TO æ–°è¡¨å;`                                    |
    | åˆ é™¤è¡¨        | `DROP TABLE [IF EXISTS] è¡¨å;`                                  |

---

#### DMLï¼ˆData Manipulation Languageï¼‰è¯­å¥ â€” æ•°æ®æ“ä½œè¯­è¨€

DML ç”¨äºå¯¹è¡¨ä¸­æ•°æ®è¿›è¡Œå¢ã€åˆ ã€æ”¹æ“ä½œã€‚

---

1. å¢åŠ æ•°æ®ï¼ˆINSERTï¼‰

    | ç±»å‹         | SQL ç¤ºä¾‹                                                 |
    | ---------- | ------------------------------------------------------ |
    | æŒ‡å®šå­—æ®µæ’å…¥     | `INSERT INTO è¡¨å (å­—æ®µ1, å­—æ®µ2) VALUES (å€¼1, å€¼2);`           |
    | å…¨å­—æ®µæ’å…¥      | `INSERT INTO è¡¨å VALUES (å€¼1, å€¼2, ...);`                 |
    | æ‰¹é‡æ’å…¥ï¼ˆæŒ‡å®šå­—æ®µï¼‰ | `INSERT INTO è¡¨å (å­—æ®µ1, å­—æ®µ2) VALUES (å€¼1, å€¼2), (å€¼3, å€¼4);` |
    | æ‰¹é‡æ’å…¥ï¼ˆå…¨å­—æ®µï¼‰  | `INSERT INTO è¡¨å VALUES (å€¼1, å€¼2, ...), (å€¼3, å€¼4, ...);`  |

---

2. ä¿®æ”¹æ•°æ®ï¼ˆUPDATEï¼‰

    ```sql
    UPDATE è¡¨å 
    SET å­—æ®µ1 = å€¼1, å­—æ®µ2 = å€¼2, ...
    [WHERE æ¡ä»¶];
    ```

    > âš ï¸ å»ºè®®ä½¿ç”¨ `WHERE` é™å®šæ¡ä»¶ï¼Œå¦åˆ™ä¼šä¿®æ”¹å…¨è¡¨æ•°æ®ã€‚

---

3. åˆ é™¤æ•°æ®ï¼ˆDELETEï¼‰

    ```sql
    DELETE FROM è¡¨å [WHERE æ¡ä»¶];
    ```

---

#### DQLï¼ˆData Query Languageï¼‰è¯­å¥ â€” æ•°æ®æŸ¥è¯¢è¯­è¨€

ç”¨äºæŸ¥è¯¢æ•°æ®ï¼Œæ˜¯ SQL çš„æ ¸å¿ƒéƒ¨åˆ†ã€‚

---

åŸºæœ¬è¯­æ³•ç»“æ„

```sql
SELECT
    å­—æ®µåˆ—è¡¨
FROM
    è¡¨ååˆ—è¡¨
WHERE
    æ¡ä»¶åˆ—è¡¨
GROUP BY
    åˆ†ç»„å­—æ®µåˆ—è¡¨
HAVING
    åˆ†ç»„åæ¡ä»¶åˆ—è¡¨
ORDER BY
    æ’åºå­—æ®µåˆ—è¡¨
LIMIT
    åˆ†é¡µå‚æ•°;
```

---

- åŸºæœ¬æŸ¥è¯¢

    | åŠŸèƒ½     | SQL ç¤ºä¾‹                                   |
    | ------ | ---------------------------------------- |
    | æŸ¥è¯¢å¤šä¸ªå­—æ®µ | `SELECT å­—æ®µ1, å­—æ®µ2 FROM è¡¨å;`               |
    | æŸ¥è¯¢æ‰€æœ‰å­—æ®µ | `SELECT * FROM è¡¨å;`                      |
    | è®¾ç½®å­—æ®µåˆ«å | `SELECT å­—æ®µ1 AS åˆ«å1, å­—æ®µ2 AS åˆ«å2 FROM è¡¨å;` |
    | å»é™¤é‡å¤è®°å½• | `SELECT DISTINCT å­—æ®µå FROM è¡¨å;`           |

---

- æ¡ä»¶æŸ¥è¯¢ï¼ˆWHEREï¼‰

```sql
SELECT å­—æ®µåˆ—è¡¨
FROM è¡¨å
WHERE æ¡ä»¶åˆ—è¡¨;
```

- æ¯”è¾ƒè¿ç®—ç¬¦

    | è¿ç®—ç¬¦                   | åŠŸèƒ½                      |
    | --------------------- | ----------------------- |
    | `>`                   | å¤§äº                      |
    | `>=`                  | å¤§äºç­‰äº                    |
    | `<`                   | å°äº                      |
    | `<=`                  | å°äºç­‰äº                    |
    | `=`                   | ç­‰äº                      |
    | `<>` æˆ– `!=`           | ä¸ç­‰äº                     |
    | `BETWEEN ... AND ...` | åœ¨æŒ‡å®šèŒƒå›´å†…ï¼ˆå«è¾¹ç•Œï¼‰             |
    | `IN (...)`            | åœ¨æŒ‡å®šé›†åˆä¸­                  |
    | `LIKE`                | æ¨¡ç³ŠåŒ¹é…ï¼ˆ`_` å•ä¸ªå­—ç¬¦ï¼Œ`%` ä»»æ„å­—ç¬¦ï¼‰ |
    | `IS NULL`             | åˆ¤æ–­æ˜¯å¦ä¸ºç©º                  |

- é€»è¾‘è¿ç®—ç¬¦

    | è¿ç®—ç¬¦          | åŠŸèƒ½           | 
    | ------------ | ------------ |
    | `AND` / `&&` | å¹¶ä¸”ï¼ˆå¤šä¸ªæ¡ä»¶åŒæ—¶æˆç«‹ï¼‰ |    
    | `OR` / `     | æˆ–è€…ï¼ˆä»»æ„ä¸€ä¸ªæˆç«‹ï¼‰ |
    | `NOT` / `!`  | å–åï¼ˆæ¡ä»¶ä¸æˆç«‹ï¼‰    |  

---

- èšåˆå‡½æ•°ï¼ˆAggregate Functionsï¼‰

    | å‡½æ•°          | ä½œç”¨            |
    | ----------- | ------------- |
    | `COUNT(å­—æ®µ)` | ç»Ÿè®¡è¡Œæ•°ï¼ˆå¿½ç•¥ NULLï¼‰ |
    | `SUM(å­—æ®µ)`   | æ±‚å’Œ            |
    | `MAX(å­—æ®µ)`   | æœ€å¤§å€¼           |
    | `MIN(å­—æ®µ)`   | æœ€å°å€¼           |
    | `AVG(å­—æ®µ)`   | å¹³å‡å€¼           |

    > ğŸ’¡ èšåˆå‡½æ•°é€šå¸¸ä¸ `GROUP BY` æ­é…ä½¿ç”¨ã€‚

---

- åˆ†ç»„æŸ¥è¯¢ï¼ˆGROUP BYï¼‰

    ```sql
    SELECT åˆ†ç»„å­—æ®µ, èšåˆå‡½æ•°(...)
    FROM è¡¨å
    [WHERE æ¡ä»¶]
    GROUP BY åˆ†ç»„å­—æ®µ
    [HAVING åˆ†ç»„åæ¡ä»¶];
    ```

    **è¯´æ˜ï¼š**

    * `WHERE` åœ¨åˆ†ç»„å‰è¿‡æ»¤ï¼›
    * `HAVING` åœ¨åˆ†ç»„åè¿‡æ»¤ï¼›
    * é€šå¸¸é…åˆèšåˆå‡½æ•°ä½¿ç”¨ã€‚

---

- æ’åºæŸ¥è¯¢ï¼ˆORDER BYï¼‰

    ```sql
    SELECT å­—æ®µåˆ—è¡¨
    FROM è¡¨å
    ORDER BY å­—æ®µ1 [ASC|DESC], å­—æ®µ2 [ASC|DESC];
    ```

    | æ’åºæ–¹å¼   | è¯´æ˜     |
    | ------ | ------ |
    | `ASC`  | å‡åºï¼ˆé»˜è®¤ï¼‰ |
    | `DESC` | é™åº     |

---

- åˆ†é¡µæŸ¥è¯¢ï¼ˆLIMITï¼‰

    ```sql
    SELECT å­—æ®µåˆ—è¡¨
    FROM è¡¨å
    LIMIT èµ·å§‹ç´¢å¼•, æŸ¥è¯¢æ¡æ•°;
    ```

    ç¤ºä¾‹ï¼š

    ```sql
    LIMIT 0, 5;   -- ä»ç¬¬0æ¡å¼€å§‹ï¼ŒæŸ¥è¯¢5æ¡è®°å½•
    ```

    > ğŸ’¡ å¸¸ç”¨äºå‰ç«¯åˆ†é¡µæ˜¾ç¤ºã€‚

---

### JDBC

```java
package com.example;

import org.junit.jupiter.api.Test;

import java.sql.*;

public class jdbcTest {
    /**jdbc å…¥é—¨ç¨‹åº*/
    @Test
    public void testUpdate() throws ClassNotFoundException, SQLException {
        //å‡†å¤‡å·¥ä½œ
        Class.forName("com.mysql.cj.jdbc.Driver");
        String url = "jdbc:mysql://localhost:3306/web01";
        String username = "root";
        String password = "123456";
        Connection conn = DriverManager.getConnection(url, username, password);
        Statement stmt = conn.createStatement();

        //æ‰§è¡Œsql
        int i = stmt.executeUpdate("update user set password = '11111111' where id = 1");//é™æ€sql
        System.out.println("sql è¯­å¥æ‰§è¡Œå å½±å“çš„ è®°å½•æ•°ï¼š  " + i);
        //é‡Šæ”¾èµ„æº
        stmt.close();
        conn.close();
    }

    @Test
    public void testJdbc() throws SQLException {
        //è·å–è¿æ¥
        Connection conn = DriverManager.getConnection("jdbc:mysql://localhost:3306/web01", "root", "123456");
        //å¸¸è§é¢„ç¼–è¯‘çš„ PreparedStatement å¯¹è±¡
        PreparedStatement pstmt = conn.prepareStatement("select * from user where username = ? and password = ?");
        //é¢„ç¼–è¯‘sqlï¼Œæ›´åŠ å®‰å…¨ï¼Œé˜²æ­¢sqlæ³¨å…¥ï¼Œæ€§èƒ½æ›´é«˜
        /**
         * é™æ€sql
         * ä½¿ç”¨æ™®é€šçš„å­—ç¬¦ä¸²æ‹¼æ¥æ–¹å¼ï¼š
         * String sql = "SELECT * FROM user WHERE username = '" + username + "' AND password = '" + password + "'";
         * Statement stmt = conn.createStatement();
         * ResultSet rs = stmt.executeQuery(sql);
         *
         * å¦‚æœæ”»å‡»è€…è¾“å…¥ï¼š
         * username: admin
         * password: ' OR '1'='1
         *
         * é‚£ä¹ˆæ‹¼æ¥åçš„ SQL å®é™…æ˜¯ï¼š
         * SELECT * FROM user WHERE username = 'admin' AND password = '' OR '1'='1'
         * '1'='1' æ’ä¸ºçœŸ â†’ æŸ¥è¯¢è¿”å›æ‰€æœ‰ç”¨æˆ· â†’ ç™»å½•ç»•è¿‡ã€‚
         *
         * SQL é¢„ç¼–è¯‘é˜¶æ®µ
         * æ•°æ®åº“åœ¨ç¬¬ä¸€æ¬¡æ¥æ”¶åˆ°å¸¦é—®å·ï¼ˆ?ï¼‰çš„ SQL æ¨¡æ¿æ—¶ï¼Œä¼šå…ˆå¯¹ SQL ç»“æ„ è¿›è¡Œç¼–è¯‘ã€ä¼˜åŒ–ã€ç”Ÿæˆæ‰§è¡Œè®¡åˆ’ã€‚
         * æ­¤æ—¶ï¼ŒSQL çš„ç»“æ„æ˜¯å›ºå®šçš„ï¼Œ? åªæ˜¯å‚æ•°å ä½ç¬¦ã€‚
         *
         * å‚æ•°ç»‘å®šé˜¶æ®µ
         * é€šè¿‡ setString() ç­‰æ–¹æ³•ä¼ å…¥å‚æ•°æ—¶ï¼Œè¿™äº›å€¼ä¼šè¢«å½“ä½œæ•°æ®ï¼ˆDataï¼‰ç»‘å®šåˆ°æ‰§è¡Œè®¡åˆ’ä¸­ï¼Œè€Œä¸ä¼šæ”¹å˜ SQL çš„è¯­æ³•ç»“æ„ã€‚*/

        //è®¾ç½®å‚æ•°
        pstmt.setString(1, "daqiao");//ç¬¬ä¸€ä¸ªé—®å·å¯¹åº”çš„å‚æ•°
        pstmt.setString(2, "123456");//ç¬¬äºŒä¸ªé—®å·å¯¹åº”çš„å‚æ•°
        //æ‰§è¡ŒæŸ¥è¯¢
        ResultSet rs = pstmt.executeQuery();
        //å¤„ç†ç»“æœé›†
        while(rs.next()){
            int id = rs.getInt("id");
            String username = rs.getString("username");
            String password = rs.getString("password");
            String name = rs.getString("name");
            int age = rs.getInt("age");

            System.out.println("ID: " + id + ", Username: " + username +
                    ", Password: " + password + ", Name: " + name + ", Age: " + age);
        }
        //å…³é—­èµ„æº
        rs.close();
        pstmt.close();
        conn.close();
    }
}
```

### mybatis

- åˆ›å»ºspringbootå·¥ç¨‹ï¼Œå¹¶å¯¼å…¥ mybatisçš„èµ·æ­¥ä¾èµ–ã€mysqlçš„é©±åŠ¨åŒ…ã€lombokã€‚é¡¹ç›®å·¥ç¨‹åˆ›å»ºå®Œæˆåï¼Œè‡ªåŠ¨åœ¨pom.xmlæ–‡ä»¶ä¸­ï¼Œå¯¼å…¥Mybatisä¾èµ–å’ŒMySQLé©±åŠ¨ä¾èµ–ã€‚
- æ•°æ®å‡†å¤‡ï¼šåˆ›å»ºç”¨æˆ·è¡¨userï¼Œå¹¶åˆ›å»ºå¯¹åº”çš„å®ä½“ç±»Userã€‚
- é…ç½®Mybatis,åœ¨ application.properties ä¸­é…ç½®æ•°æ®åº“çš„è¿æ¥ä¿¡æ¯ã€‚

    ```java
    # é…ç½®æŸ¥çœ‹æ—¥å¿—
    mybatis.configuration.log-impl=org.apache.ibatis.logging.stdout.StdOutImpl

    # ä½¿ç”¨ druid è¿™ä¸ª æ•°æ®åº“è¿æ¥æ± 
    spring.datasource.type=com.alibaba.druid.pool.DruidDataSource
    spring.datasource.url=jdbc:mysql://localhost:3306/web01
    spring.datasource.driver-class-name=com.mysql.cj.jdbc.Driver
    spring.datasource.username=root
    spring.datasource.password=123456

    # æŒ‡å®š xml æ˜ å°„é…ç½®æ–‡ä»¶çš„ä½ç½®
    mybatis.mapper-locations=classpath:mapper/*.xml
    ```
- ä¸Šä¸€æ­¥æ—¢å¯ä»¥å°†é…ç½®ä»£ç å†™åˆ°ä¸Šè¿°æ–‡ä»¶ä¸­ï¼Œä¹Ÿå¯ä»¥ç›´æ¥ä½¿ç”¨xmlæ–‡ä»¶æ¥è¿›è¡Œé…ç½®ï¼Œä½†è¦æ³¨æ„xmlæ–‡ä»¶çš„ä½ç½®ï¼Œä»¥åŠxmlæ–‡ä»¶ä¸­åŒ…åè¦æ­£ç¡®
    ```xml
    <?xml version="1.0" encoding="UTF-8"?>
    <!--<beans xmlns="http://www.springframework.org/schema/beans"-->
    <!--       xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"-->
    <!--       xsi:schemaLocation="http://www.springframework.org/schema/beans http://www.springframework.org/schema/beans/spring-beans.xsd">-->

    <!--</beans>-->

    <!DOCTYPE mapper
            PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
            "https://mybatis.org/dtd/mybatis-3-mapper.dtd">
    <mapper namespace="com.example.day251007_springbootmybatisquickstart.mapper.UserMapper">
        <!-- æŸ¥è¯¢æ“ä½œ -->
        <select id="findAll" resultType="com.example.day251007_springbootmybatisquickstart.pojc.User">
            select * from user
        </select>

    </mapper>
    ```

- ç¼–å†™Mybatisç¨‹åºï¼šç¼–å†™Mybatisçš„æŒä¹…å±‚æ¥å£ï¼Œå®šä¹‰SQLè¯­å¥ï¼ˆæ³¨è§£ï¼‰.
åœ¨åˆ›å»ºå‡ºæ¥çš„springbootå·¥ç¨‹ä¸­ï¼Œåœ¨å¼•å¯¼ç±»æ‰€åœ¨åŒ…ä¸‹ï¼Œåœ¨åˆ›å»ºä¸€ä¸ªåŒ… mapper ã€‚åœ¨ mapper åŒ…ä¸‹åˆ›å»ºä¸€ä¸ªæ¥å£ UserMapper ï¼Œè¿™æ˜¯ä¸€ä¸ªæŒä¹…å±‚æ¥å£ï¼ˆMybatisçš„æŒä¹…å±‚æ¥å£è§„èŒƒä¸€èˆ¬éƒ½å« XxxMapperï¼‰ã€‚

    ```java
    package com.example.day251007_springbootmybatisquickstart.mapper;

    import com.example.day251007_springbootmybatisquickstart.pojc.User;
    import org.apache.ibatis.annotations.*;

    import java.util.List;

    // ç¼–å†™mybatis çš„æŒä¹…å±‚æ¥å£
    @Mapper //åº”ç”¨ç¨‹åºåœ¨è¿è¡Œæ—¶ï¼Œä¼šè‡ªåŠ¨çš„ä¸ºè¯¥æ¥å£åˆ›å»ºä¸€ä¸ªå®ç°ç±»å¯¹è±¡ï¼ˆä»£ç†å¯¹è±¡ï¼‰ï¼Œå¹¶ä¸”ä¼šè‡ªåŠ¨åœ°å°†è¯¥å®ç°ç±»å¯¹è±¡å­˜å…¥IOCå®¹å™¨ä¸­
    public interface UserMapper {

        /**
         * æŸ¥è¯¢æ‰€æœ‰ç”¨æˆ· æ³¨é‡Šæ‰æ³¨è§£æ¥è¿›è¡Œæµ‹è¯• xml */
        //@Select("select * from user")
        public List<User> findAll();

        /** åˆ é™¤ çš„ä¸¤ç§æ–¹å¼ */
        @Delete("delete from user where id = 5")
        public Integer deleteById1();

        //é€šè¿‡å‚æ•°å ä½ç¬¦å· #{...} æ¥å ä½ï¼Œåœ¨è°ƒç”¨deleteByIdæ–¹æ³•æ—¶ï¼Œä¼ é€’çš„å‚æ•°å€¼ï¼Œæœ€ç»ˆä¼šæ›¿æ¢å ä½ç¬¦ã€‚
        @Delete("delete from user where id = #{id}")
        public Integer deleteById2(Integer id);

        /** å¢ */
        @Insert("insert into user(username,password,name,age) values(#{username},#{password},#{name},#{age})")
        public void insert(User user);

        /** æ”¹ */
        @Update("update user set username = #{username},password=#{password},name=#{name},age=#{age} where id=#{id}")
        public void update(User user);

        /** æŸ¥ */
        @Select("select * from user where username = #{username} and password = #{password}")
        public User findByUsernameAndPassword(String username,String password);
    }
    ```

-  å•å…ƒæµ‹è¯•;
åœ¨åˆ›å»ºå‡ºæ¥çš„SpringBootå·¥ç¨‹ä¸­ï¼Œåœ¨srcä¸‹çš„testç›®å½•ä¸‹ï¼Œå·²ç»è‡ªåŠ¨å¸®æˆ‘ä»¬åˆ›å»ºå¥½äº†æµ‹è¯•ç±» ï¼Œå¹¶ä¸”åœ¨æµ‹è¯•ç±»ä¸Šå·²ç»æ·»åŠ äº†æ³¨è§£ @SpringBootTestï¼Œä»£è¡¨è¯¥æµ‹è¯•ç±»å·²ç»ä¸SpringBootæ•´åˆã€‚ 
è¯¥æµ‹è¯•ç±»åœ¨è¿è¡Œæ—¶ï¼Œä¼šè‡ªåŠ¨é€šè¿‡å¼•å¯¼ç±»åŠ è½½Springçš„ç¯å¢ƒï¼ˆIOCå®¹å™¨ï¼‰ã€‚æˆ‘ä»¬è¦æµ‹è¯•é‚£ä¸ªbeanå¯¹è±¡ï¼Œå°±å¯ä»¥ç›´æ¥é€šè¿‡@Autowiredæ³¨è§£ç›´æ¥å°†å…¶æ³¨å…¥è¿›è¡Œï¼Œç„¶åå°±å¯ä»¥æµ‹è¯•äº†ã€‚ 

    ```java
    package com.example.day251007_springbootmybatisquickstart;

    import com.example.day251007_springbootmybatisquickstart.mapper.UserMapper;
    import com.example.day251007_springbootmybatisquickstart.pojc.User;
    import org.junit.jupiter.api.Test;
    import org.springframework.beans.factory.annotation.Autowired;
    import org.springframework.boot.test.context.SpringBootTest;

    import java.util.List;

    @SpringBootTest
    class Day251007SpringbootMybatisQuickstartApplicationTests {

        @Autowired
        private UserMapper userMapper;

        @Test
        public void testFindAll(){
            List<User> users = userMapper.findAll();
            for (User user : users) {
                System.out.println(user);
            }
        }

        @Test
        public void testFindById(){
            System.out.println(userMapper.deleteById1());
            System.out.println(userMapper.deleteById2(1));
        }

        @Test
        public void testInsert(){
            User user = new User();
            user.setUsername("lililili");
            user.setPassword("55555555");
            user.setAge(18);
            user.setName("æè‰è‰");
            userMapper.insert(user);
        }

        @Test
        public void testUpdate(){
            User user = new User();
            user.setId(6);
            user.setUsername("lililili");
            user.setPassword("88888888");
            user.setAge(18);
            user.setName("æè‰è‰");
            userMapper.update(user);
        }
        @Test
        public void testSelectByUsernameAndPassword(){
            User  u = userMapper.findByUsernameAndPassword("lililili","88888888");
            System.out.println(u);
        }

    }
    ```