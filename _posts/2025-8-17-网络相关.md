---
title: "网络相关"
date: 2025-08-17
categories: [blog]
tags: [网络, 免流]
---

记录一下网络配置相关的

# 1. 校园网免流

首先确定校园网是否有ipv6，有检测网站，查一下即可。

## 1.1 vpn全局代理ipv6

购买支持ipv6的节点，然后在clash中导入开全局和ipv6即可，但是有的VPN有ipv6地址却无法免流
参考：[https://ipv6-net.top/#/register?code=7QeiijHH](https://ipv6-net.top/#/register?code=7QeiijHH)
注册登录后参照使用教程，节点不需要必须买这个网站的，其他地方的也可以，支持免流即可。也可以通过ifconfig查看是否有有效的ipv6地址
可以尝试ping谷歌的ipv6查看节点能否支持ipv6
ping6 2001:4860:4860::8888

## 1.2 vps搭建虚拟服务器

### 1.2.1 windows 系统

谷歌搜过 **极星网 ipv6免流**   或  [https://www.jixing.one/vps/get-a-vps/](https://www.jixing.one/vps/get-a-vps/)
下面的教程没试过，看起来类似[https://github.com/zhaoweih/Shadowsocks-Tutorial](https://github.com/zhaoweih/Shadowsocks-Tutorial)

### 1.2.2 ubuntu 系统

步骤类型在Windows系统中的

在linux的教程（部分参考这个： [https://github.com/dragonstrong/ubuntu-vps](https://github.com/dragonstrong/ubuntu-vps) ）

第一步不一样，ubuntu系统可以直接使用 SSH 进行连接，替代 Windows 上的 PuTTY
`ssh root@your-vps-ip -p 你的端口`         #其中root是用户名，在vps中默认的话是root，@后跟的是ipv4的地址，-p是端口，windows是22，我就没管这个端口，没加-p选项
ssh root@your-vps-ip

运行后有的会提示是否连接，输入yes即可，之后会输入密码，去你vps那复制密码粘贴过来即可
剩下的命令行的步骤和windows一样，如果在windows配置完了，ubuntu下就不用配置了
安装v2rayn ： [https://github.com/2dust/v2rayn/releases](https://github.com/2dust/v2rayn/releases) , 找一个适合自己版本的安装，v2rayn的教程在极星网中有

#### 1.2.2.1 ssh问题

SSH的相关问题
如果ssh链接报错：
![ssh](/assets/images/免流_image7.png)

没安装ssh.安装：
```bash
sudo apt update
sudo apt install openssh-server
sudo systemctl enable ssh
sudo systemctl start ssh
```

我在ssh等路服务器时会看到安全提示，就尝试设置了ssh 秘钥：
在电脑终端运行：`ssh-keygen -t rsa -b 4096 -C "你的邮箱"`
![ssh](/assets/images/免流_image8.png)

会提示将密钥存储在什么位置，按回车ENTER , 会提示输入密码，我为了方便没设置密码，按了回车ENTER , 重复你上句设置的密码，我还是回车ENTER , 即一路回车

生成两个文件：

**id_rsa（私钥，千万别泄露！）**
**id_rsa.pub（公钥，可以上传到 Vultr）**

添加 SSH 公钥到 Vultr，点击加号
![ssh](/assets/images/免流_image9.png)

复制 id_rsa.pub 内容（运行以下命令查看）：`cat ~/.ssh/id_rsa.pub`
粘贴到 Vultr 并命名，比如 my-laptop-key
创建新 VPS 时，选择这个 SSH Key，这样就可以免密登录了！

我这有两个注意点，不清楚其他人是不是这样，第一步ssh连接用校园网很难连接上，我一般是流量或者流量挂梯子，之后浏览器登录x-ui界面时如果之前是流量挂梯子，就把梯子退出，不然登不上。

然后
ssh root@your-vps-ip

提示
![ssh](/assets/images/免流_image10.png)

运行下面的命令，删除旧的 SSH 记录：
`ssh-keygen -f "/home/sd101t/.ssh/known_hosts" -R "xxxx"`   （引号里的vps的ip）
然后 重新连接 SSH：ssh root@ip

#### 1.2.2.2 配置

这里的步骤和前文中极星网的设置一致

```bash
yum update -y
yum install -y curl
yum install -y socat
安装 X-ui 面板
bash <(curl -Ls https://raw.githubusercontent.com/vaxilu/x-ui/master/install.sh)
```
安装过程中需要设置面板账户，密码（建议设置得复杂点），和端口号（54321），设置完后输入y确认

开放端口
输入下面的命令放行54321和12345端口
```bash
firewall-cmd --permanent --add-port=54321/tcp --add-port=12345/tcp
 #开放端口（54321是面板端口，12345是后面节点要用的）
firewall-cmd --permanent --list-ports 
#查看防火墙的开放的端口
firewall-cmd --reload 
#重启防火墙(修改配置后要重启防火墙)
```
开启BBR加速
```bash
echo "net.core.default_qdisc=fq" >> /etc/sysctl.conf
echo "net.ipv4.tcp_congestion_control=bbr" >> /etc/sysctl.conf
sysctl -p
```
可以输入下面命令检查BBR是否开启
```bash
sysctl -n net.ipv4.tcp_congestion_control
lsmod | grep bbr
```
-  在浏览器输入VPS的IP地址加54321端口回车登录X-ui面板。例如 xxx.xxx.xxx.xx:54321
在入站列表中点加号，按照下面配置好了之后点添加即可
- 备注：随便设置
- 协议：自己选，这里选的是vmess
- 监听IP：不填
- 端口：12345
- id：保持默认
- 额外ID：0（保持默认值）
- 传输：选ws，即WebSocket
- 路径：随便输入，注意前面必须要加上斜杠“/”
- tls：有域名和证书可以打开，这里就不打开了
- 其它保持默认

点击该入站规则的操作-二维码，然后点击复制，在v2rayN图标，点服务器，从剪贴板导入，然后添加刚才复制的二维码链接。
获取VPS的IPv6地址，地址可以在VPS网站上找到，
打开v2rayN双击服务器链接（节点），将IPv4地址替换为刚才复制的VPS的IPv6地址，然后点击确定



在ubuntu下生成的ssh密钥在windows中使用：
复制私钥的内容
在 Windows 打开 记事本，粘贴进去，并保存为：C:\Users\你的Windows用户名\.ssh\id_rsa
右键 id_rsa > 属性 > 只读（防止权限问题）
使用PuTTY ，点击 "Load"，选择 id_rsa，点击 "Save private key"，保存为 id_rsa.ppk
连接 VPS，打开 PuTTY，在 "Host Name" 填入 root@VPS_IP
在左侧 SSH -> Auth 里，选择 id_rsa.ppk，点击 "Open" 连接


监控网络：
安装 **iftop**（如果还没安装）：
```bash
sudo apt install iftop -y
# 运行 iftop（假设你的网络接口是 eth0，如果是 Wi-Fi 可能是 wlan0）：
sudo iftop -i eth0
# 我的是:sudo iftop -i enp12s0
```


#### 1.2.2.3 vultr步骤

记录一下步骤：
进入vultr，注册充值后，进入首页，点击部署
![vultr](/assets/images/免流_image1.png)

点击：
![vultr](/assets/images/免流_image2.png)

选择云计算cpu-选择地点：
![vultr](/assets/images/免流_image3.png)

操作系统选择centos 9 stream x64：
![vultr](/assets/images/免流_image4.png)

选择最便宜的就行，我只找到这个：
![vultr](/assets/images/免流_image5.png)

不需要自动备份（有钱的话随意），只保留ipv6那个选项
![vultr](/assets/images/免流_image6.png)

下面的ssh秘钥可以不设置，名字和标签随便写，点击deploy now

# 2. github 问题

## 2.1 github克隆时遇到问题
fatal: 无法访问 'https://github.com/ouguangjun/Leg-KILO.git/'：GnuTLS recv error (-110): The TLS connection was non-properly terminated.

![github](/assets/images/github_网络_image1.png)

使用代理的话：
```bash
git config --global http.proxy http://your_proxy_address:port #改为自己的代理端口号和网址
```

## 2.2 github配置 SSH 方式

- 生成 SSH 密钥：
```bash
ssh-keygen -t ed25519 -C "your_email@example.com"
```
- 一路回车即可。会生成在 ~/.ssh/id_ed25519.pub
- 将公钥添加到 GitHub：
- 打开 GitHub → Settings → SSH and GPG keys → New SSH Key
将 ~/.ssh/id_ed25519.pub 的内容复制粘贴进去
用 SSH 克隆仓库： `git clone --branch 1.8 git@github.com:XieGuochao/csapp.git`

