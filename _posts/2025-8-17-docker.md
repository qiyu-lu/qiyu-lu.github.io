---
title: "docker相关"
date: 2025-08-17
categories: [blog]
tags: [网络, docker]
---

记录一下使用docker过程中遇到的问题，有些问题还没有解决，只是测试

# 1. 网络问题

网络：
`sudo vim /etc/docker/daemon.json`

加入代理：
```json
{
    "runtimes": {
        "nvidia": {
            "args": [],
            "path": "nvidia-container-runtime"
        }
    },
  "proxies": {
    "http-proxy": "http://127.0.0.1:7897",
    "https-proxy": "http://127.0.0.1:7897"
  }
}
```
重新加载 Docker 配置
```bash
sudo systemctl daemon-reload
# 重启 Docker 服务
sudo systemctl restart docker

# 验证
sudo docker pull ubuntu:latest
```
报错：
![docker](/assets/images/docker_网络_image1.png)

原因是未登录
- 登录 Docker 账户，去官网登录注册 , 然后登录
```bash
sudo docker login
username可以填邮箱
```

# 2. 英伟达docker
```bash
sudo vim /etc/nvidia-container-runtime/config.toml
```
设置no-cgroups = false

```bash
# 重启：
sudo systemctl restart docker

# 检测
sudo docker run --rm --runtime=nvidia --gpus all ubuntu nvidia-smi
```
