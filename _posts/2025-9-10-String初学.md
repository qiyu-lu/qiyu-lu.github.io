---
title: "Java中String学习"
date: 2025-08-12 
categories: [JAVA学习]
tags: [JAVA]
---

# 1. 内存位置

直接赋值构造的字符串 String 会存储到 内存中的串池中，即当使用双引号进行直接赋值时，系统会检查该字符串在串池中是否存在，如果不存在，则创建新的，存在则进行复用。

手动 new 出来的会在堆中开辟一个新的空间，不会复用，就不会复用内存


# 2. String 的比较 和一些方法

等号 == 比较

如果比较的是基本数据类型，int double byte short等，比的就是具体数据的大小

如果是String这类引用数据类型进行比较，比较的就是地址值，所以如果是使用引号进行构造时，可以使用 == 号来比较（因为在串池中地址相同），而使用new出的字符串

然后键盘录入得到的字符串也是new出来的


```java
int [] arr1 = {1,2};
int [] arr2 = {1,2};
String s6 = new String("aaa");
String s7 = new String("aaa");
String s8 = "aaa";
String s9 = "aaa";
System.out.println("arr1 的地址 是： " + arr1);
System.out.println("arr2 的地址 是： " + arr2);
System.out.println("s6 的地址 是： " + s6);
System.out.println("s7 的地址 是： " + s7);
System.out.println("s8 的地址 是： " + s8);
System.out.println("s9 的地址 是： " + s9);

System.out.println("arr1 == arr2 的比较结果 " + (arr1 == arr2));
System.out.println("s6 == s7 的比较结果 " + (s6 == s7));
System.out.println("s8 == s9 的比较结果 " + (s8 == s9));
```

最终的输出结果是：

```bash
==============练习二: 等号的问题==============
arr1 的地址 是： [I@b4c966a
arr2 的地址 是： [I@1d81eb93
s6 的地址 是： aaa
s7 的地址 是： aaa
s8 的地址 是： aaa
s9 的地址 是： aaa
arr1 == arr2 的比较结果 false
s6 == s7 的比较结果 false
s8 == s9 的比较结果 true
```



那么要进行比较时采用
`s6.equals(要比较的字符串)`的输出来进行比较，不忽略大小写
`s6.equalsIgnoreCase(s10)` 忽略大小写


- 而如果是下面这个代码

    ```java
    String s11 = "abc";
    String s12 = "a" + "b" + "c";
    System.out.println("s11 ==  s12 的结果："+ (s11 ==  s12));
    String s13 = "ab";
    String s14 = s13 + "c";
    System.out.println("s11 ==  s14 的结果："+ (s11 ==  s14));
    ```
    第一个中s12是直接相加没有变量的参与，然后编译器在编译时会自动进行优化，因此，在编译时就会将 `"a" + "b" + "c"` 拼接为 `"abc"`，会复用串池中的字符串，然后又都是串池中的字符串，因此地址一样，输出是true

    而第二个中s14 则有变量的参与每一行都会创建一个新的字符串，地址不一样，输出结果是false



- 截取对应的字符串 `res += num.substring(0, 3);`

- 替代字符串中的 某些元素 `str.replace("23", "AAAAA")`

# 3. String 相关的容器

# 3.1 `StringBuilder`

- `StringBuilder` 可以看作一个容器，创建之后里面的内容是可变的


    例如 在String类型进行拼接时，拼接时就会生成一个新的字符串，然后将新的字符串的地址赋值给原来的变量，如果拼接次数多了，会影响运行速度，这种情况下采用StringBuilder会提高效率，
    StringBuilder 的构造函数，空参构造，有参构造（以一个String类型作为参数）
    方法：

    - StringBuilder append(任意类型) 添加数据，并返回对象本身
    - StringBuilder reverse() 反转容器中的内容
    - int length() 返回长度
    - String toString() 将StringBuilder 转换为String

    ```java
    String str = "";
    long start = System.nanoTime();
    for(int i = 0; i < 10000; ++i) str += "a";
    long end = System.nanoTime();
    System.out.println("String直接拼接运行时间" + (end-start));

    StringBuilder str2 = new StringBuilder();
    long start2 = System.nanoTime();
    for(int i = 0; i < 10000; ++i) str2.append("a");
    long end2 = System.nanoTime();
    System.out.println("StringBuilder 拼接运行时间" + (end2-start2));
    ```

    输出为 

    ```bash
    String直接拼接运行时间12280000
    StringBuilder 拼接运行时间367000
    ```

    StringBuilder的效率高的原因，默认创建一个长度为16的字节数组，添加的内容长度小于16，则直接存入，添加的内容大于16则会扩容（原来的容量*2+2），若添加的内容超过了扩容后的容量就直接以添加的内容的长度作为实际容量

# 3.2 `StringJoiner`

使用时需要导入库 `import java.util.StringJoiner;`

- 构造函数

    public StringJoiner(间隔符号) 用来指定拼接时的间隔符号

    public StringJoiner(间隔符号，开始符号，结束符号) 用来指定拼接时的间隔符号,开始符号和结束符号

- 一些方法

    ```java
    StringJoiner sj = new StringJoiner("-----", "[", "]");
    //添加元素
    sj.add("1").add("2").add("3").add("4").add("5").add("6").add("7");
    System.out.println(sj);
    //返回长度
    System.out.println(sj.length());
    //转化为字符串
    String str = sj.toString();
    System.out.println(str);
    ```